# Demo2025

Решение Demo2025 по специальности 09.02.06 «Сетевое и системное администрирование»

<details>
  <summary>Модуль №1: Настройка сетевой инфраструктуры (нажмите для развертывания)</summary>

> **Текст задания:**  
> 
> Вид аттестации/уровень ДЭ: ПА, ГИА ДЭ БУ, ГИА ДЭ ПУ (инвариантная часть)
> 
> **Задание:**  
> Необходимо разработать и настроить инфраструктуру информационно-коммуникационной системы согласно предложённой топологии (см. Рисунок 1). Задание включает базовую настройку устройств:
> - Присвоение имён устройствам (используйте полное доменное имя);
> - Расчёт IP-адресации;
> - Настройку коммутации и маршрутизации.
> 
> При проектировании и настройке сети следует вести отчёт, включающий таблицы и схемы, предусмотренные в задании. Итоговый отчёт должен содержать одну сводную таблицу и пять отчётов о ходе работы. По завершении работы итоговый отчёт необходимо сохранить на рабочем месте.
> 
> **Рисунок 1. Топология сети**
> 
> ![image](https://github.com/user-attachments/assets/5e93864e-93db-42b9-ac98-494d5679c599)
> 
> **Таблица 1**
> 
> | Машина    | RAM (ГБ) | CPU | HDD/SDD (ГБ) | OS                                    |
> |-----------|----------|-----|--------------|----------------------------------------|
> | ISP       | 1        | 1   | 10           | ОС Альт JeOS/Linux или аналог          |
> | HQ-RTR    | 1        | 1   | 10           | ОС EcoRouter или аналог                |
> | BR-RTR    | 1        | 1   | 10           | ОС EcoRouter или аналог                |
> | HQ-SRV    | 2        | 1   | 10           | ОС Альт Сервер или аналог              |
> | BR-SRV    | 2        | 1   | 10           | ОС Альт Сервер или аналог              |
> | HQ-CLI    | 3        | 2   | 15           | ОС Альт Рабочая Станция или аналог       |
> | **Итого** | **10**   | **7** | **65**     | —                                      |
> 
> 1. **Базовая настройка устройств:**
>    - Задайте имена устройств согласно топологии (используйте полные доменные имена).
>    - На всех устройствах выполните конфигурацию IPv4. Используйте адреса из приватного диапазона (RFC1918).
>    - Локальная сеть для HQ-SRV (VLAN100) должна поддерживать не более 64 адресов.
>    - Локальная сеть для HQ-CLI (VLAN200) – не более 16 адресов.
>    - Локальная сеть для BR-SRV – не более 32 адресов.
>    - Сеть для управления (VLAN999) – не более 8 адресов.
>    - Сведения об адресации занесите в отчёт (см. пример Таблицы 3).
> 
> 2. **Настройка ISP:**
>    - Настройте адресацию на интерфейсах:
>      - Интерфейс, подключённый к магистральному провайдеру, получает адрес по DHCP.
>      - Настройте маршруты по умолчанию там, где это необходимо.
>      - Интерфейс, к которому подключён HQ-RTR, – сеть 172.16.4.0/28.
>      - Интерфейс, к которому подключён BR-RTR, – сеть 172.16.5.0/28.
>      - На ISP настройте динамическую NAT-трансляцию для доступа к Интернету через HQ-RTR и BR-RTR.
> 
> 3. **Создание локальных учётных записей:**
>    - Создайте пользователя **sshuser** на серверах HQ-SRV и BR-SRV:
>      - Пароль: **P@ssw0rd**
>      - UID: 1010
>      - Пользователь должен иметь возможность запускать команды через sudo без повторной аутентификации.
>    - Создайте пользователя **net_admin** на маршрутизаторах HQ-RTR и BR-RTR:
>      - Пароль: **P@$$word**
>      - Пользователь должен обладать максимальными привилегиями и иметь возможность выполнять sudo без дополнительной аутентификации.
> 
> 4. **Настройка виртуального коммутатора на HQ-RTR:**
>    - На интерфейсе, подключённом к офису HQ, настройте VLAN:
>      - Сервер HQ-SRV – VLAN ID 100.
>      - Клиент HQ-CLI – VLAN ID 200.
>      - Создайте сеть для управления с VLAN ID 999.
>    - Подробности по настройке VLAN и реализации разделения занесите в отчёт.
> 
> 5. **Настройка безопасного удалённого доступа на серверах HQ-SRV и BR-SRV:**
>    - Для подключения используйте порт 2024.
>    - Разрешите доступ только пользователю **sshuser**.
>    - Ограничьте число попыток входа до двух.
>    - Настройте баннер с текстом «Authorized access only».
> 
> 6. **Настройка IP-туннеля между офисами HQ и BR:**
>    - Выберите технологию GRE или IP-in-IP.
>    - Сведения о настройке туннеля внесите в отчёт.
> 
> 7. **Настройка динамической маршрутизации:**
>    - Обеспечьте доступ к ресурсам одного офиса из другого.
>    - Для динамической маршрутизации используйте протокол с состоянием канала (link-state) – выбор конкретного протокола оставляется на ваше усмотрение. Разрешите протокол только на интерфейсах IP-туннеля.
>    - Маршрутизаторы должны обмениваться маршрутами только между собой.
>    - Обеспечьте защиту протокола с помощью парольной аутентификации и задокументируйте настройки.
> 
> 8. **Настройка динамической NAT-трансляции:**
>    - Настройте NAT для обоих офисов, чтобы все устройства имели доступ к Интернету.
> 
> 9. **Настройка DHCP:**
>    - Настройте соответствующую подсеть.
>    - Для офиса HQ маршрутизатор HQ-RTR выступает в роли DHCP-сервера, а HQ-CLI – клиент.
>    - Исключите из выдачи адрес маршрутизатора.
>    - Укажите шлюз по умолчанию – IP-адрес HQ-RTR.
>    - DNS-сервер для HQ-CLI – IP-адрес HQ-SRV.
>    - DNS-суффикс для офисов HQ – **au-team.irpo**.
>    - Сведения о настройке занесите в отчёт.
> 
> 10. **Настройка DNS:**
>     - Основной DNS-сервер – HQ-SRV.
>     - Сервер должен обеспечивать разрешение имён устройств в IP-адреса и наоборот (согласно Таблице 2).
>     - В качестве сервера пересылки используйте общедоступный DNS-сервер.
> 
> 11. **Настройка часового пояса:**
>     - Установите часовой пояс на всех устройствах согласно месту проведения экзамена.

</details>

---

## Диапазоны IP-адресов по RFC1918

| Диапазон             | CIDR           | Количество адресов | Пример диапазона                  |
|----------------------|----------------|--------------------|-----------------------------------|
| Класс A              | 10.0.0.0/8     | 16 777 216         | 10.0.0.0 – 10.255.255.255           |
| Класс B              | 172.16.0.0/12  | 1 048 576          | 172.16.0.0 – 172.31.255.255          |
| Класс C              | 192.168.0.0/16 | 65 536             | 192.168.0.0 – 192.168.255.255        |

---

## Разделение IP-адресов по VLAN

| VLAN ID | Назначение                 | Сеть         | Маска | Количество адресов | Диапазон IP-адресов             |
|---------|----------------------------|--------------|-------|--------------------|---------------------------------|
| 100     | Офис HQ-SRV                | 192.168.10.0 | /26   | 64                 | 192.168.10.0 – 192.168.10.63     |
| 200     | Офис HQ-CLI                | 192.168.20.0 | /28   | 16                 | 192.168.20.0 – 192.168.20.15     |
| 300     | Офис BR-SRV                | 192.168.30.0 | /27   | 32                 | 192.168.30.0 – 192.168.30.31     |
| 999     | Сеть управления            | 192.168.99.0 | /29   | 8                  | 192.168.99.0 – 192.168.99.7      |

---

## Адресация и шлюзы для настройки ISP

| Подключение         | Сеть           | IP-адрес (устройство)    | IP-адрес (ISP)   | Шлюз по умолчанию (для устройства внутри сети) |
|---------------------|----------------|--------------------------|------------------|-----------------------------------------------|
| HQ-RTR – ISP        | 172.16.4.0/28  | 172.16.4.2 (HQ-RTR)      | 172.16.4.1       | 172.16.4.2                                    |
| BR-RTR – ISP        | 172.16.5.0/28  | 172.16.5.2 (BR-RTR)      | 172.16.5.1       | 172.16.5.2                                    |

---

# Решение

---

## 1. Настройка имён устройств

Для соответствия топологии задайте полные доменные имена:

```bash
hostnamectl set-hostname isp.au.team.irpo && exec bash
hostnamectl set-hostname hq-rtr.au.team.irpo && exec bash
hostnamectl set-hostname br-rtr.au.team.irpo && exec bash
hostnamectl set-hostname hq-srv.au.team.irpo && exec bash
hostnamectl set-hostname hq-cli.au.team.irpo && exec bash
hostnamectl set-hostname br-srv.au.team.irpo && exec bash
```

---

## 2. Конфигурация IPv4 на JeOS

### 2.0 Настройка hostname

Если hostname не был задан в начале, выполните:

```bash
hostnamectl set-hostname isp.au.team.irpo && exec bash
```

### 2.1 Проверка получения настроек DHCP

Проверьте получение настроек командой:

```bash
ip addr
```

Если настройки не получены, настройте DHCP.

### 2.2 Редактирование конфигурационного файла через Vim

Откройте файл настроек сетевого адаптера для интерфейса **ens33**:

```bash
vi /etc/net/ifaces/ens33/options
```

- Удалите строку `BOOTPROTO=static`, если она присутствует.
- Перейдите в режим редактирования (нажмите `i`) и измените значение на:
  ```bash
  BOOTPROTO=dhcp
  ```
- Сохраните изменения, нажав `Ctrl+C` (или `Esc`), затем введите команду:
  ```bash
  :wq
  ```

_Полезные команды Vim:_  
- Навигация: `h`, `j`, `k`, `l`, `w`, `b`, `e`, `0`, `$`, `gg`, `G`.  
- Редактирование: `i`, `a`, `o`, `dd`, `yy`, `p`, `u`, `Ctrl+r`.  
- Сохранение: `:w`, выход: `:q`, сохранение и выход: `:wq`.

---

## 3. Перезагрузка сети и обновление пакетов

Перезагрузите сетевые сервисы:

```bash
systemctl restart network
```

Обновите список пакетов и установите необходимые утилиты:

```bash
apt-get update -y && apt-get install nano iptables -y
```

Очистите консоль:

```bash
clear
```

---

## 4. Настройка сетевых адаптеров

1. Определите имя сетевого адаптера:
   ```bash
   ip addr
   ```
2. Проверьте наличие каталога для интерфейса **ens33**:
   ```bash
   ls /etc/net/ifaces/
   ```
   Если каталога нет, создайте его:
   ```bash
   mkdir /etc/net/ifaces/ens33
   ```
3. Отредактируйте файл настроек для интерфейса **ens33**:
   ```bash
   nano /etc/net/ifaces/ens33/options
   ```
   Добавьте:
   ```bash
   BOOTPROTO=static
   TYPE=eth
   ```
4. Сохраните файл (Ctrl+O, затем Ctrl+X).
5. Создайте файл для задания IP-адреса для подсети HQ:
   ```bash
   nano /etc/net/ifaces/ens33/ipv4address
   ```
   Пример содержимого:
   ```
   172.16.4.1/28
   ```
6. Аналогично создайте файл для подсети BR:
   ```bash
   nano /etc/net/ifaces/ens33/ipv4address
   ```
   Пример содержимого:
   ```
   172.16.5.1/28
   ```
7. Перезагрузите сеть:
   ```bash
   systemctl restart network
   ```
8. Проверьте IP-адреса:
   ```bash
   ip addr
   ```

---

## 5. Настройка NAT (маскарадинга)

Для обеспечения доступа к Интернету настройте маскарадинг для подсетей.

### 5.1 Для HQ-RTR

```bash
iptables -t nat -A POSTROUTING -o ens33 -s 172.16.4.0/28 -j MASQUERADE
```

### 5.2 Для BR-RTR

```bash
iptables -t nat -A POSTROUTING -o ens33 -s 172.16.5.0/28 -j MASQUERADE
```

### 5.3 Сохранение правил и автозапуск

Сохраните текущие правила:

```bash
iptables-save > /etc/sysconfig/iptables
```

Добавьте iptables в автозагрузку:

```bash
systemctl enable --now iptables
```

---

## 6. Включение пересылки пакетов

Откройте файл `/etc/net/sysctl.conf` для редактирования:

```bash
nano /etc/net/sysctl.conf
```

Найдите строку:
```
net.ipv4.ip_forward = 0
```
и измените её на:
```
net.ipv4.ip_forward = 1
```

Сохраните изменения и перезагрузите сеть:

```bash
systemctl restart network
```

---

## 7. Настройка сети для HQ-RTR

### 7.0 Задание hostname

Если hostname не был задан, выполните:

```bash
hostnamectl set-hostname hq-rtr.au.team.irpo && exec bash
```

### 7.1 Настройка параметров интерфейса

Откройте файл настроек для интерфейса **ens33**:

```bash
vi /etc/net/ifaces/ens33/options
```

Удалите (если присутствуют) строки:
- `NM_CONTROLLED`
- `DISABLED`
- `SYSTEMD_CONTROLLED`

### 7.2 Назначение IP-адреса

Создайте или отредактируйте файл `ipv4address` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4address
```

Укажите IP-адрес с маской, например:
```
172.16.4.2/28
```

### 7.3 Настройка маршрутизации

Создайте или отредактируйте файл `ipv4route` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4route
```

Добавьте маршрут по умолчанию:
```
default via 172.16.4.1
```

### 7.4 Настройка DNS

Создайте или отредактируйте файл `resolv.conf` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/resolv.conf
```

Добавьте:
```
nameserver 172.16.4.1
```

### 7.5 Дополнительные настройки

Для устранения возможных конфликтов с DNS-сервером удалите пакет `systemd-networkd` (если это допустимо для вашей системы):

```bash
apt-get remove systemd-networkd
```

Перезагрузите сеть:

```bash
systemctl restart network
```

Проверьте доступность DNS:

```bash
ping ya.ru
```

Обновите пакеты и установите редактор:

```bash
apt-get update -y && apt-get install nano -y
```

---

## 8. Настройка NAT для офиса HQ

### 8.0 Создание интерфейса для офиса HQ

Создайте или отредактируйте файл `ipv4address` для интерфейса **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4address
```

Укажите IP-адрес с маской, например:
```
192.168.10.1/26
```

### 8.1 Настройка NAT на HQ-RTR

```bash
iptables -t nat -A POSTROUTING -o ens33 -s 192.168.10.0/26 -j MASQUERADE
```

### 8.2 Сохранение правил и автозапуск

```bash
iptables-save > /etc/sysconfig/iptables
systemctl enable --now iptables
```

### 8.3 Включение пересылки пакетов

Убедитесь, что в файле `/etc/net/sysctl.conf` строка:
```
net.ipv4.ip_forward = 1
```
и перезагрузите сеть:
```bash
systemctl restart network
```

---

## 9. Настройка сети для BR-RTR

<details>
<summary>Развернуть инструкцию</summary>

### 9.0 Задание hostname

Если hostname не установлен, выполните:

```bash
hostnamectl set-hostname br-rtr.au.team.irpo && exec bash
```

### 9.1 Настройка параметров интерфейса

Откройте файл настроек для **ens33**:

```bash
vi /etc/net/ifaces/ens33/options
```
и удалите строки:
- `NM_CONTROLLED`
- `DISABLED`
- `SYSTEMD_CONTROLLED`

### 9.2 Назначение IP-адреса

Создайте или отредактируйте файл `ipv4address` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4address
```
Пропишите, например:
```
172.16.5.2/28
```

### 9.3 Настройка маршрутизации

Создайте или отредактируйте файл `ipv4route` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4route
```
Добавьте:
```
default via 172.16.5.1
```

### 9.4 Настройка DNS

Создайте или отредактируйте файл `resolv.conf` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/resolv.conf
```
Добавьте:
```
nameserver 172.16.5.1
```

### 9.5 Дополнительные настройки

При необходимости удалите `systemd-networkd`:
```bash
apt-get remove systemd-networkd
```
Перезагрузите сеть:
```bash
systemctl restart network
```
Проверьте DNS:
```bash
ping ya.ru
```
Обновите систему и установите nano:
```bash
apt-get update -y && apt-get install nano -y
```

</details>

---

## 10. Настройка NAT для офиса BR

<details>
<summary>Развернуть инструкцию</summary>

### 10.0 Создание интерфейса для офиса BR

Создайте или отредактируйте файл `ipv4address` для **ens33**:

```bash
vi /etc/net/ifaces/ens33/ipv4address
```
Пропишите, например:
```
192.168.30.1/27
```

### 10.1 Настройка NAT на BR-RTR

```bash
iptables -t nat -A POSTROUTING -o ens33 -s 192.168.30.0/27 -j MASQUERADE
```

### 10.2 Сохранение правил и автозапуск

```bash
iptables-save > /etc/sysconfig/iptables
systemctl enable --now iptables
```

### 10.3 Включение пересылки пакетов

Убедитесь, что в файле `/etc/net/sysctl.conf` установлено:
```
net.ipv4.ip_forward = 1
```
и перезагрузите сеть:
```bash
systemctl restart network
```

</details>

---

## 11. Создание локальных учётных записей на HQ-RTR

### 11.1 Создание учётной записи `net_admin`

```bash
useradd net_admin
```
Задайте пароль:
```bash
passwd net_admin
```
_(Пароль: **P@$$word**)_

### 11.2 Настройка sudo без парольной аутентификации

Добавьте пользователя в группу `wheel`:
```bash
usermod -a -G wheel net_admin
```

### 11.3 Редактирование файла sudoers

Откройте файл:
```bash
nano /etc/sudoers
```
Найдите строку:
```
#WHEEL_USERS ALL=(ALL:ALL) NOPASSWD: ALL
```
и удалите символ `#`, затем сохраните изменения.

### 11.4 Проверка работы sudo

Выйдите из root (команда `exit`) и выполните вход под пользователем `net_admin`:
```bash
login: net_admin  
Password: P@$$word
```
Проверьте, выполнив:
```bash
sudo su
```
Если приглашение изменилось, настройка выполнена корректно.

---

## 12. Создание локальных учётных записей на BR-RTR

<details>
<summary>Развернуть инструкцию</summary>

### 12.1 Создание учётной записи `net_admin`

```bash
useradd net_admin
```
Установите пароль:
```bash
passwd net_admin
```
_(Пароль: **P@$$word**)_

### 12.2 Добавление в группу wheel

```bash
usermod -a -G wheel net_admin
```

### 12.3 Редактирование файла sudoers

Откройте файл:
```bash
nano /etc/sudoers
```
Найдите строку:
```
#WHEEL_USERS ALL=(ALL:ALL) NOPASSWD: ALL
```
и удалите `#`, затем сохраните изменения.

### 12.4 Проверка sudo

Выйдите из root и выполните вход под `net_admin`:
```bash
login: net_admin  
Password: P@$$word
```
Затем выполните:
```bash
sudo su
```
Успешное выполнение команды подтверждает корректную настройку.

</details>

---

## 13. Настройка VLAN

_Реализация настройки VLAN остаётся на усмотрение исполнителя. Результаты конфигурации VLAN необходимо задокументировать в отчёте._

---

## 14. Настройка HQ-SRV

### 14.0 Задание hostname

Если hostname не задан, выполните:
```bash
hostnamectl set-hostname hq-srv.au.team.irpo && exec bash
```

### 14.1 Настройка параметров интерфейса

Откройте файл для интерфейса **ens33**:
```bash
vi /etc/net/ifaces/ens33/options
```
и удалите (если присутствуют) строки:
- `NM_CONTROLLED`
- `DISABLED`
- `SYSTEMD_CONTROLLED`

### 14.2 Назначение IP-адреса

Создайте или отредактируйте файл `ipv4address` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/ipv4address
```
Укажите, например:
```
192.168.10.2/26
```

### 14.3 Настройка маршрутизации

Создайте или отредактируйте файл `ipv4route` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/ipv4route
```
Добавьте:
```
default via 192.168.10.1
```

### 14.4 Настройка DNS

Создайте или отредактируйте файл `resolv.conf` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/resolv.conf
```
Добавьте:
```
nameserver 192.168.10.1
```

### 14.5 Дополнительные настройки

При необходимости удалите `systemd-networkd`:
```bash
apt-get remove systemd-networkd
```
Перезагрузите сеть:
```bash
systemctl restart network
```
Проверьте доступность DNS:
```bash
ping ya.ru
```
Обновите пакеты и установите nano:
```bash
apt-get update -y && apt-get install nano -y
```

---

## 15. Создание локальных учётных записей на HQ-SRV

### 15.1 Создание учётной записи `sshuser`

```bash
useradd -u 1010 sshuser
```
Задайте пароль:
```bash
passwd sshuser
```
_(Пароль: **P@ssw0rd**)_

### 15.2 Добавление в группу wheel

```bash
usermod -a -G wheel sshuser
```

### 15.3 Редактирование файла sudoers

Откройте:
```bash
nano /etc/sudoers
```
Найдите строку:
```
#WHEEL_USERS ALL=(ALL:ALL) NOPASSWD: ALL
```
и удалите `#`, затем сохраните изменения.

### 15.4 Проверка sudo

Выйдите из root и выполните вход под `sshuser`:
```bash
login: sshuser
Password: P@ssw0rd
```
Выполните:
```bash
sudo su
```
Успешное выполнение подтверждает корректность настроек.

---

## 16. Настройка BR-SRV

<details>
<summary>Развернуть инструкцию</summary>

### 16.0 Задание hostname

Если hostname не задан, выполните:
```bash
hostnamectl set-hostname br-srv.au.team.irpo && exec bash
```

### 16.1 Настройка параметров интерфейса

Откройте файл для интерфейса **ens33**:
```bash
vi /etc/net/ifaces/ens33/options
```
и удалите строки:
- `NM_CONTROLLED`
- `DISABLED`
- `SYSTEMD_CONTROLLED`

### 16.2 Назначение IP-адреса

Создайте или отредактируйте файл `ipv4address` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/ipv4address
```
Пропишите, например:
```
192.168.30.2/27
```

### 16.3 Настройка маршрутизации

Создайте или отредактируйте файл `ipv4route` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/ipv4route
```
Добавьте:
```
default via 192.168.30.1
```

### 16.4 Настройка DNS

Создайте или отредактируйте файл `resolv.conf` для **ens33**:
```bash
vi /etc/net/ifaces/ens33/resolv.conf
```
Добавьте:
```
nameserver 192.168.30.1
```

### 16.5 Дополнительные настройки

При необходимости удалите `systemd-networkd`:
```bash
apt-get remove systemd-networkd
```
Перезагрузите сеть:
```bash
systemctl restart network
```
Проверьте DNS:
```bash
ping ya.ru
```
Обновите пакеты и установите nano:
```bash
apt-get update -y && apt-get install nano -y
```

### 16.6 Создание учётной записи `sshuser`

```bash
useradd -u 1010 sshuser
```
Задайте пароль:
```bash
passwd sshuser
```
_(Пароль: **P@ssw0rd**)_

### 16.7 Добавление в группу wheel

```bash
usermod -a -G wheel sshuser
```

### 16.8 Редактирование файла sudoers

Откройте:
```bash
nano /etc/sudoers
```
Найдите строку:
```
#WHEEL_USERS ALL=(ALL:ALL) NOPASSWD: ALL
```
удалите `#` и сохраните изменения.

### 16.9 Проверка sudo

Выйдите из root и выполните вход под `sshuser`:
```bash
login: sshuser
Password: P@ssw0rd
```
Затем выполните:
```bash
sudo su
```
Успешное выполнение подтверждает корректность настроек.

</details>

---

## 17. Настройка безопасного удалённого доступа на серверах HQ-SRV и BR-SRV

### 17.1 Настройка SSH на HQ-SRV

Откройте файл конфигурации SSH:
```bash
nano /etc/openssh/sshd_config
```
Внесите следующие изменения (раскомментируйте и измените значения):
- Измените порт с 22 на 2024:
  ```diff
  -#Port 22
  +Port 2024
  ```
- Ограничьте доступ к определённому пользователю:
  ```diff
  -#Match User anoucvs
  +Match User sshuser
  ```
- Установите баннер:
  ```diff
  -#Banner none
  +Banner /etc/openssh/sshd_config/Banner.txt
  ```
- Ограничьте число попыток аутентификации:
  ```diff
  -#MaxAuthTries 6
  +MaxAuthTries 2
  ```
Сохраните изменения (Ctrl+O, затем Ctrl+X).

Создайте файл баннера:
```bash
nano /etc/openssh/sshd_config/Banner.txt
```
И добавьте:
```
Authorized access only
```

Перезагрузите службу SSH:
```bash
systemctl restart sshd.service
```

### 17.2 Настройка SSH на BR-SRV

<details>
<summary>Развернуть инструкцию</summary>

1. Откройте конфигурационный файл:
   ```bash
   nano /etc/openssh/sshd_config
   ```
2. Внесите следующие изменения:
   - Измените порт:
     ```diff
     -#Port 22
     +Port 2024
     ```
   - Ограничьте доступ для пользователя:
     ```diff
     -#Match User anoucvs
     +Match User sshuser
     ```
   - Задайте баннер:
     ```diff
     -#Banner none
     +Banner /etc/openssh/sshd_config/Banner.txt
     ```
   - Ограничьте количество попыток:
     ```diff
     -#MaxAuthTries 6
     +MaxAuthTries 2
     ```
3. Сохраните файл (Ctrl+O, затем Ctrl+X).

4. Создайте или отредактируйте баннер:
   ```bash
   nano /etc/openssh/sshd_config/Banner.txt
   ```
   И добавьте:
   ```
   Authorized access only
   ```
5. Перезагрузите SSH:
   ```bash
   systemctl restart sshd.service
   ```

</details>
